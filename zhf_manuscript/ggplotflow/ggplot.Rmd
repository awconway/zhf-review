---
title: "ggplot2"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tibble)
library(tidyverse)

data <- tibble(x= 1:100, y= 1:100)

data %>% 
  ggplot(aes(x, y)) +
  scale_x_continuous(minor_breaks = seq(10, 100, 10)) +
  scale_y_continuous(minor_breaks = seq(10, 100, 10)) +
  theme_linedraw() -> p
  
p<-p +
  geom_rect(xmin = 29, xmax=71, ymin=93, ymax=101, color='black',
            fill='white', size=0.25, size=0.25) +
  annotate('text', x= 50, y=97,label= '129 references imported for screening as 129 studies', size=2.5) 

p<- p + geom_rect(xmin = 32, xmax=68, ymin=74, ymax=82, color='black',
            fill='white', size=0.25) +
  annotate('text', x= 50, y=78,label= '94 studies screened against title and abstract', size=2.5) +
  geom_rect(xmin = 74, xmax=93, ymin=84, ymax=92, color='black',
            fill='white', size=0.25) +
  annotate('text', x= 83.5, y=88,label= '35 duplicates removed', size=2.5)

p<- p + geom_segment(
    x=50, xend=50, y=92, yend=83.3, 
    size=0.15, linejoin = "mitre", lineend = "butt",
    arrow = arrow(length = unit(1, "mm"), type= "closed")) +
  geom_segment(
    x=50, xend=73, y=88, yend=88, 
    size=0.15, linejoin = "mitre", lineend = "butt",
    arrow = arrow(length = unit(1, "mm"), type= "closed")) +
  geom_segment(
    x=50, xend=50, y=73, yend=65, 
    size=0.15, linejoin = "mitre", lineend = "butt",
    arrow = arrow(length = unit(1, "mm"), type= "closed")) +
  geom_segment(
    x=50, xend=73, y=69, yend=69, 
    size=0.15, linejoin = "mitre", lineend = "butt",
    arrow = arrow(length = unit(1, "mm"), type= "closed"))

p <- p+ geom_rect(xmin = 33, xmax=67, ymin=55, ymax=63, color='black',
            fill='white', size=0.25) +
  annotate('text', x= 50, y=59,label= '24 studies assessed for full-text eligibility', size=2.5) +
  geom_rect(xmin = 74, xmax=91, ymin=65, ymax=73, color='black',
            fill='white', size=0.25) +
  annotate('text', x= 82, y=69,label= ' 70 studies excluded', size=2.5) 
  
p <- p + geom_rect(xmin = 42, xmax=58, ymin=38, ymax=45, color='black',
            fill='white', size=0.25) +
annotate('text', x= 50, y=41.5,label= '17 studies included', size=2.5) +

  geom_rect(xmin = 74, xmax=103, ymin=26, ymax=52, color='black',
            fill='white', size=0.25) +
  annotate('text', x= 82, y=39,label= 
  '7 studies excluded
            3 Wrong intervention
                                    1 Abstract only (full paper included)
    1 Tcore not ZHF
           1 Wrong comparator
             1 Wrong study design', size=2.5) #weird spacing to help indent
p <- p +   geom_segment(
    x=50, xend=50, y=54, yend=46, 
    size=0.15, linejoin = "mitre", lineend = "butt",
    arrow = arrow(length = unit(1, "mm"), type= "closed")) +
  geom_segment(
    x=50, xend=73, y=50, yend=50, 
    size=0.15, linejoin = "mitre", lineend = "butt",
    arrow = arrow(length = unit(1, "mm"), type= "closed"))
```
```{r}
p + theme_void()
```


129 references imported for screening as 129 studies 
	35 duplicates removed
94 studies screened against title and abstract
	70 studies excluded
24 studies assessed for full-text eligibility
	7 studies excluded
		3  Wrong intervention
		1  Abstract - full paper included
		1  Tcore not ZHF
		1  Wrong comparator
		1  Wrong study design
	0 studies ongoing
	0 studies awaiting classification
17 studies included
